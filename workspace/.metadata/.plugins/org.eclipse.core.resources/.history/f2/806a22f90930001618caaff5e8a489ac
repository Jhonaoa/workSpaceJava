import java.io.EOFException;
 import java.io.IOException;
 import java.io.ObjectInputStream;
 import java.io.ObjectOutputStream;
 import java.net.ServerSocket;
 import java.net.Socket;
 import java.awt.BorderLayout;
 import java.awt.event.ActionEvent;
 import java.awt.event.ActionListener;
 import javax.swing.JFrame;
 import javax.swing.JScrollPane;
 import javax.swing.JTextArea;
 import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class ServidorBuscaminas extends JFrame {
	private JTextField campoIntroducir; // recibe como entrada un mensaje del usuario
	private JTextArea areaPantalla; // muestra información al usuario
	private ObjectOutputStream salida; // flujo de salida hacia el cliente
	private ObjectInputStream entrada; // flujo de entrada del cliente
	private ServerSocket servidor; // socket servidor
	private Socket conexion; // conexión al cliente
	private int contador =0; // contador del número de conexiones
	
	public ServidorBuscaminas()
	{
	
		super( "Servidor" );
		
		 campoIntroducir = new JTextField(); // crea objeto campoIntroducir
		 campoIntroducir.setEditable( false );
		 campoIntroducir.addActionListener(
		 new ActionListener()
		 {
		 // envía un mensaje al cliente
		 public void actionPerformed( ActionEvent evento )
		 {
		 enviarDatos( evento.getActionCommand() );
		 campoIntroducir.setText( "" );
		 } // fin del método actionPerformed
		 } // fin de la clase interna anónima
		 ); // fin de la llamada a addActionListener
		
		 add( campoIntroducir, BorderLayout.NORTH );
		
		 areaPantalla = new JTextArea(); // crea objeto areaPantalla
		 add( new JScrollPane( areaPantalla ), BorderLayout.CENTER );
		
		 setSize( 300, 150 ); // establece el tamaño de la ventana
		 setVisible( true ); // muestra la ventana
		
	}
	
	public void ejecutarServidor()
	{
		try {
			servidor = new ServerSocket(12345,2);
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
		while(true)
		{
			try {
				
				conexion = servidor.accept();
				System.out.println("conexion"+(contador += 1)+"exitosa");
			} catch (IOException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
		}
	}
	
	

}
